<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SeeYou Schmuck – Workshops</title>
  <link rel="icon" href="static/logo.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { brand:'#AF9778', graysoft:'#E6E6E6', graymid:'#CCCBCD' } } }
    }
  </script>
  <style>
    body::before{content:"";position:fixed;inset:0;background:url("static/bg.jpg") center/cover no-repeat;z-index:-2;filter:brightness(1.05);}
    body::after{content:"";position:fixed;inset:0;background:linear-gradient(to bottom, rgba(255,255,255,.85), rgba(255,255,255,.9));z-index:-1;}
  </style>
</head>
<body class="text-slate-900">
  <!-- Header -->
  <header class="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <img src="static/logo.png" alt="SeeYou" class="w-10 h-10 rounded-full ring-1 ring-gray-200">
      <h1 class="text-xl font-semibold" style="color:#AF9778">SeeYou Schmuck – Workshops</h1>
    </div>
    <div class="flex flex-wrap gap-2">
      <button id="btnManageSlots" class="px-3 py-2 rounded-xl bg-graysoft hover:bg-graymid text-sm">Termine verwalten</button>
      <button id="btnExportCsv" class="px-3 py-2 rounded-xl bg-graysoft hover:bg-graymid text-sm">CSV Export</button>
      <button id="btnBackup" class="px-3 py-2 rounded-xl bg-graysoft hover:bg-graymid text-sm">Backup</button>
      <label class="px-3 py-2 rounded-xl bg-graysoft hover:bg-graymid text-sm cursor-pointer">
        Wiederherstellen<input id="fileRestore" type="file" accept="application/json" class="hidden">
      </label>
      <button id="btnArchiveView" class="px-3 py-2 rounded-xl bg-graysoft hover:bg-graymid text-sm">Archiv</button>
    </div>
  </header>

  <!-- Suche + Filter -->
  <section class="max-w-4xl mx-auto px-4">
    <div class="flex items-center gap-3 my-3">
      <input id="search" class="w-full px-3 py-2 rounded-xl border border-graymid/60 bg-white/80 backdrop-blur" placeholder="Suche nach Datum, Titel …">
      <select id="filterStatus" class="px-3 py-2 rounded-xl border border-graymid/60 bg-white/80">
        <option value="">alle</option>
        <option value="open">offen</option>
        <option value="full">voll</option>
        <option value="past">vergangen</option>
        <option value="archived">archiv</option>
      </select>
    </div>
  </section>

  <!-- Slot-Liste -->
  <main class="max-w-4xl mx-auto px-4 pb-28" id="list"></main>

  <!-- Modal: Buchung hinzufügen/bearbeiten -->
  <div id="modalBooking" class="fixed inset-0 z-50 bg-black/40 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg p-5">
      <div class="flex items-center justify-between mb-3">
        <h2 id="modalBookingTitle" class="text-lg font-semibold" style="color:#AF9778">Buchung</h2>
        <button data-close="booking" class="text-slate-500 hover:text-slate-700">✕</button>
      </div>
      <form id="formBooking" class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <label class="flex flex-col gap-1">
          <span class="text-sm">Name *</span>
          <input required type="text" id="bk_name" class="px-3 py-2 rounded-xl border border-graymid/60">
        </label>
        <label class="flex flex-col gap-1">
          <span class="text-sm">Telefon *</span>
          <input required type="tel" id="bk_phone" class="px-3 py-2 rounded-xl border border-graymid/60">
        </label>
        <label class="flex flex-col gap-1">
          <span class="text-sm">Personen *</span>
          <input required type="number" min="1" step="1" id="bk_count" class="px-3 py-2 rounded-xl border border-graymid/60" value="1">
        </label>
        <!-- Kontaktkanal -->
        <label class="flex flex-col gap-1">
          <span class="text-sm">Kontaktkanal</span>
          <select id="bk_channel" class="px-3 py-2 rounded-xl border border-graymid/60">
            <option value="">–</option>
            <option>Instagram</option>
            <option>WhatsApp</option>
            <option>E-Mail</option>
            <option>Triviar</option>
            <option>Telefonisch</option>
            <option>Persönlich</option>
          </select>
        </label>
        <label class="md:col-span-2 flex flex-col gap-1">
          <span class="text-sm">Notiz</span>
          <textarea id="bk_notes" rows="3" class="px-3 py-2 rounded-xl border border-graymid/60"></textarea>
        </label>
        <div class="md:col-span-2 flex items-center justify-between gap-2">
          <button type="button" id="btnDeleteBooking" class="px-4 py-2 rounded-xl bg-rose-100 text-rose-700 hidden">Löschen</button>
          <div class="flex gap-2">
            <button type="button" data-close="booking" class="px-4 py-2 rounded-xl bg-graysoft">Abbrechen</button>
            <button type="submit" class="px-4 py-2 rounded-xl text-white" style="background:#AF9778">Speichern</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal: Termine/Slots verwalten -->
  <div id="modalSlots" class="fixed inset-0 z-50 bg-black/40 hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-lg p-5">
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-lg font-semibold" style="color:#AF9778">Termin (Slot) anlegen / bearbeiten</h2>
        <button data-close="slots" class="text-slate-500 hover:text-slate-700">✕</button>
      </div>
      <form id="formSlot" class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <label class="flex flex-col gap-1 md:col-span-2">
          <span class="text-sm">Kategorie</span>
          <select id="sl_category" class="px-3 py-2 rounded-xl border border-graymid/60">
            <option>Schmuck-Workshop</option>
            <option>Kindergeburtstag</option>
            <option>JGA</option>
            <option>Mädelsabend</option>
            <option>Weihnachtsfeier</option>
            <option>Sonstiges</option>
          </select>
        </label>
        <label class="flex flex-col gap-1 md:col-span-2" id="row_title_other" style="display:none">
          <span class="text-sm">Titel (bei „Sonstiges”)</span>
          <input type="text" id="sl_title_other" class="px-3 py-2 rounded-xl border border-graymid/60" placeholder="Eigener Titel">
        </label>
        <label class="flex flex-col gap-1">
          <span class="text-sm">Kapazität *</span>
          <input type="number" min="1" step="1" id="sl_capacity" class="px-3 py-2 rounded-xl border border-graymid/60" value="10" required>
        </label>
        <label class="flex flex-col gap-1">
          <span class="text-sm">Start *</span>
          <input type="datetime-local" id="sl_starts" class="px-3 py-2 rounded-xl border border-graymid/60" required>
        </label>
        <label class="flex flex-col gap-1">
          <span class="text-sm">Ende *</span>
          <input type="datetime-local" id="sl_ends" class="px-3 py-2 rounded-xl border border-graymid/60" required>
        </label>
        <div class="md:col-span-2 flex justify-end gap-2">
          <button type="button" data-close="slots" class="px-4 py-2 rounded-xl bg-graysoft">Abbrechen</button>
          <button type="submit" class="px-4 py-2 rounded-xl text-white" style="background:#AF9778">Speichern</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur border border-gray-200 shadow-xl rounded-xl px-4 py-3 hidden">
    <span id="toastMsg" class="text-sm"></span>
    <a id="toastLink" href="#" target="_blank" class="ml-3 underline" style="color:#AF9778">Öffnen</a>
  </div>

  <script src="app.js"></script>
</body>
</html>
